generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Style {
  id               String   @id @default(cuid())
  name             String   @unique
  shortDescription String   @map("short_description")
  systemPrompt     String   @db.Text @map("system_prompt")
  svgExamples      Json     @default("[]") @map("svg_examples")
  averageRating    Float    @default(0) @map("average_rating")
  createdAt        DateTime @default(now()) @db.Timestamptz
  updatedAt        DateTime @updatedAt @db.Timestamptz

  rates  Rate[]
  assets Asset[]

  @@map("styles")
}

model Rate {
  id        String   @id @default(cuid())
  token     String   @unique
  text      String?  @db.Text
  rating    Int
  styleId   String   @map("style_id")
  style     Style    @relation(fields: [styleId], references: [id])
  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @updatedAt @db.Timestamptz

  @@index([styleId])
  @@map("rates")
}

model Asset {
  id        String   @id @default(cuid())
  token     String   @unique @default(uuid())
  asset     String   @db.Text
  styleId   String   @map("style_id")
  style     Style    @relation(fields: [styleId], references: [id])
  brandName String?  @map("brand_name")
  brandVoice String? @map("brand_voice")
  createdAt DateTime @default(now()) @db.Timestamptz
  updatedAt DateTime @updatedAt @db.Timestamptz

  @@index([styleId])
  @@map("assets")
}
